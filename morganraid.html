<html>
<head>
  <title>Leaflet From Scratch</title>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/bootstrap-responsive.css" >
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="css/dvf.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="css/example.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="css/ui.css" type="text/css" media="screen" />
 	<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="dvf-js/bootstrap.min.js"></script>
	<script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  
  <link rel="stylesheet" href="src/leaflet.defaultextent.css" />
  <script src="src/leaflet.defaultextent.js"></script>

  <link rel="stylesheet" href="src/easyPrint.css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="src/jQuery.print.js"></script>
  <script src="src/leaflet.easyPrint.js"></script>
    
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.24.0/L.Control.Locate.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.24.0/L.Control.Locate.css' rel='stylesheet' />
	<!--[if lt IE 9]>
	  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.21.0/L.Control.Locate.ie.css' rel='stylesheet' />
	<![endif]-->
  
  <link rel="stylesheet" href="src/leaflet-sidebar.css" />
  <script src="src/leaflet-sidebar.js"></script>
    
  <link rel="stylesheet" href="src/leaflet.awesome-markers.css">
  <script src="src/leaflet.awesome-markers.js"></script>
  
  <script src="poi.geojson" type="text/javascript"></script>
  <script src="adamscounty.geojson" type="text/javascript"></script>
  
  <link rel="stylesheet" href="src/Control.Geocoder.css" />
  <script src="src/Control.Geocoder.js"></script>
  
  <link rel="stylesheet" href="src/leaflet.groupedlayercontrol.css" />
  <script src="src/leaflet.groupedlayercontrol.js"></script>
	
	<script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.3"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.0.0/moment.min.js"></script>
	<script type="text/javascript" src="dvf-js/leaflet-dvf.js"></script>

 <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }

      #map {
      	background-image: url('john-morgan-raid.jpg');
      	background-size: 100%;
      }

      #map div.leaflet-tile-pane {
      	opacity: 0.4;
      }

      div.leaflet-control-legend {
      	width: 400px;
      	min-height: 120px;
      }

      .legend-line {
      	margin-bottom: 20px;
      }

      .legend-line div.scale-bars i {
      	background: none !important;
      	width: 0px;
      	height: 0px !important;
      	vertical-align: middle;
      	border-left: none !important;
      }

    </style>
</head>

<body>
	<div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Morgan's Raid</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="http://ovrdc.github.io/leaflet">Home</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid">
    	<div class="row-fluid">
			<div id="map"></div>
		</div>
	</div>
  <script>
  window.onload = function () {
    var Esri_WorldTopoMap = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
	    attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
    });
    
    var Esri_WorldImagery = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { 
    	attribution: 'Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community' 
    	
    });
    
    var map = L.map('map', {center: [38.809365, -83.517054],
			zoom: 10,
			layers: [Esri_WorldTopoMap],
			defaultExtentControl: true
		});
	
	function popup(feature, layer) {
		if (feature.properties && feature.properties.NAME) {
			layer.bindPopup( '<b>' +feature.properties.NAME + '</b>' + '<br>' +feature.properties.CATEGORY);
		}
		else if (feature.properties && feature.properties.CATEGORY) {
			layer.bindPopup(feature.properties.CATEGORY);
		}
	};
	
	var starIcon = L.AwesomeMarkers.icon({
    		prefix: 'fa', //font awesome rather than bootstrap
    		markerColor: 'red', // see colors above
		icon: 'star' //http://fortawesome.github.io/Font-Awesome/icons/
	});
	var qbarns = L.geoJson(poi,{
		 filter: function(feature, layer) {
			return feature.properties.CATEGORY == "Quilt Barns";
		},
		pointToLayer: function(feature, latlng) {
			return L.marker(latlng, {
				icon: starIcon
			})
		},
		
	//	pointToLayer: function (feature, latlng) {
        //    		return L.AwesomeMarkers.icon(latlng, {icon: redMarker})
	//	}
		onEachFeature: popup
	}).addTo(map);

	var otherpoi = L.geoJson(poi,{
		 filter: function(feature, layer) {
			return feature.properties.CATEGORY != "Quilt Barns";
		},
		
	//	pointToLayer: function (feature, latlng) {
        //    		return L.AwesomeMarkers.icon(latlng, {icon: redMarker})
	//	}
		onEachFeature: popup
	}).addTo(map);

//	map.fitBounds(poi.getBounds(), {
//		padding: [50, 50]
//	});
	
	var county = L.geoJson(adamscounty,{
                color: 'grey',
                weight: 2,
                opacity: .7,
                fill: false
                //dashArray: '20,15',
                //lineJoin: 'round'
	}).addTo(map);
	
	var oldmap = L.imageOverlay('map1975-1.jpg', [[38.550974, -83.752114], [39.125732, -83.212542]], {opacity: 0.5})
    	;
	
	var baseMaps = {
		"Basemap": Esri_WorldTopoMap,
		"Imagery": Esri_WorldImagery
	};

//	var overlayMaps = {
//		 "Quilt Barns": qbarns,
//		 "Other":	otherpoi,
//		 "1975 Tourism Map": oldmap
//	};

	var groupedOverlays = {
		 "Points of Interest" : {
		 "Quilt Barns": qbarns,
		 "Other":	otherpoi
		 },
		 "Other": {
		 "1975 Tourism Map": oldmap
		 }
	};

	var sidebar = L.control.sidebar('sidebar').addTo(map);

	L.Control.geocoder().addTo(map);
	
//	L.control.layers(baseMaps, overlayMaps, {
//		collapsed:false,
//		opacity: .7
//	}).addTo(map);

	L.control.groupedLayers(baseMaps, groupedOverlays).addTo(map);
		
	L.control.locate().addTo(map);
	
	//L.easyPrint().addTo(map);
	
	//L.control.search().addTo(map);
	

}
  </script>
  </div>
</body>  
</html>
